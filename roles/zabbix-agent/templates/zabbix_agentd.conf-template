{% if zabbix_proxy == '' %}
Server={{ zabbix_server }}
ServerActive={{ zabbix_server }}
{% elif zabbix_server == '' %}
Server=127.0.0.1
ServerActive=127.0.0.1
{% else %}
Server={{ zabbix_proxy }},{{ zabbix_server }}
ServerActive={{ zabbix_proxy }}
{% endif %}
HostMetadata={{ zabbix_hostmetadata if ((zabbix_hostmetadata is defined) and (zabbix_hostmetadata != 'None') and (zabbix_hostmetadata != '')) else ('_GENERIC') }}
{% if (zabbix_Hostname is defined) and (zabbix_Hostname != 'None') %}
Hostname={{ zabbix_Hostname }}
{% else %}
HostnameItem={{ zabbix_HostnameItem if ((zabbix_HostnameItem is defined) and (zabbix_HostnameItem != 'None') and (zabbix_HostnameItem != '')) else ('system.run[hostname -f]') }}
{% endif %}
AllowRoot=1
Timeout=15
UnsafeUserParameters=1
EnableRemoteCommands=1
Include=/etc/zabbix/zabbix_agentd.d/
LogFileSize=0
LogFile=/var/log/zabbix/zabbix_agentd.log
PidFile=/var/run/zabbix/zabbix_agentd.pid
